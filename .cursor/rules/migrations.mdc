---
alwaysApply: true
---

This repository uses Alembic + SQLAlchemy to handle migrations, I've configured a make command `make migrate name={migration_name}` that autogenerates migrations and then another `make upgrade head` to update the database with the changes. Though it's mostly ok, many times alembic does not detect the changes and the procedure is to check the autogenerated migration file to see if there are all the changes present of if not, manually add it to the file. 

You should:
* ALWAYS use the make migrate and make upgrade commands.
* NEVER try to manually create a migration file in the versions folder
* Make sure that all the changes are applied in the migration file before proceeding to upgrade, anyway there's a `make downgrade -1` command to revert the last migration

Some considerations I've saw in alembic autogeneration:
* Types subproperties are not being detected. Example: If you change something like STRING(length=1) to STRING(length=2), or INT() to INT(unsigned=True), it won't be detected by the engine.
* If you change some column prop like _server_default it won't be detected.